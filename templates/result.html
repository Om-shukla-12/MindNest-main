<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Analysis Result</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">

  <style>
    .recommendations-container {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid #e0e0e0;
    }
    .media-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 1rem;
    }
</style>
</head>
<body>

<nav>
  <div class="nav-container">
    <span class="logo">🧠 MindNest</span>
    <div class="nav-links">
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('dashboard') }}">Dashboard</a>
      <a href="{{ url_for('history') }}">History</a>
      
      {% if session.get('logged_in') %}
        <a href="{{ url_for('logout') }}" class="nav-auth">Logout</a>
      {% else %}
        <a href="{{ url_for('login') }}" class="nav-auth">Login</a>
      {% endif %}
    </div>
  </div>
</nav>

<div class="container">
  <h2>Analysis Result</h2>

  <div class="entry">{{ text }}</div>

  <div class="badges">
    <span class="badge mood-{{ result.mood|lower }}">😊 Mood: {{ result.mood|capitalize }}</span>
    <span class="badge emotion-{{ result.emotion|lower }}">🌈 Emotion: {{ result.sentiment|capitalize }}</span>
  </div>

  <div class="suggestion"><strong>Suggestion:</strong> {{ result.suggestion }}</div>

    {% if music_recs %}
  <div class="recommendations-container">
      <h3>Music to Match Your Mood 🎵</h3>
      <div class="media-grid">
          {% for track in music_recs %}
          <div class="media-card">
              <iframe
                  style="border-radius:12px"
                  src="https://open.spotify.com/embed/track/{{ track.id }}?utm_source=generator"
                  width="100%"
                  height="152"
                  frameBorder="0"
                  allowfullscreen=""
                  allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                  loading="lazy">
              </iframe>
          </div>
          {% endfor %}
        </div>
    </div>
      {% endif %}


  <div class="actions">
    <a href="{{ url_for('home') }}" class="btn edit">← Back to Journal</a>
    <a href="{{ url_for('dashboard') }}" class="btn edit">📊 View Dashboard</a>
    <button onclick="window.print()" class="btn delete">📄 Save as PDF</button>
  </div>
</div>

<script>
  const mood = "{{ result.mood|lower }}";
    const emotion = "{{ result.sentiment|lower }}";
</script>

</body>
</html>
